import{d as z,h as m,c as B,o as y,r as M,I,w as S,aj as V,j as $,P as j,k as t,n as h,a as ue,t as Z,ak as G,T as J,aQ as ie,s as T,y as K,v as ce,b as C,e as w,J as de,F as fe,a3 as pe,b7 as q,ay as Q,b8 as x,aO as R,z as me}from"./framework.DXFcsTCa.js";import{a as W,g as k,_ as X,e as ge,n as E,F as H,w as ve,k as Y,y as ye,G as he,T as A,H as be,I as Ce,A as P,J as Ee,K as Fe,E as we,p as U,h as Se,L as Te}from"./aria.kF4utiZ_.js";const ke=s=>s,ze=W({value:{type:[String,Number],default:""},max:{type:Number,default:99},isDot:Boolean,hidden:Boolean,type:{type:String,values:["primary","success","warning","info","danger"],default:"danger"},showZero:{type:Boolean,default:!0},color:String,badgeStyle:{type:k([String,Object,Array])},offset:{type:k(Array),default:[0,0]},badgeClass:{type:String}}),Le=z({name:"ElBadge"}),Ne=z({...Le,props:ze,setup(s,{expose:n}){const e=s,a=ge("badge"),o=m(()=>e.isDot?"":E(e.value)&&E(e.max)?e.max<e.value?`${e.max}+`:`${e.value}`:`${e.value}`),d=m(()=>{var l,u,i,g,v;return[{backgroundColor:e.color,marginRight:H(-((u=(l=e.offset)==null?void 0:l[0])!=null?u:0)),marginTop:H((g=(i=e.offset)==null?void 0:i[1])!=null?g:0)},(v=e.badgeStyle)!=null?v:{}]});return n({content:o}),(l,u)=>(y(),B("div",{class:h(t(a).b())},[M(l.$slots,"default"),I(J,{name:`${t(a).namespace.value}-zoom-in-center`,persisted:""},{default:S(()=>[V($("sup",{class:h([t(a).e("content"),t(a).em("content",l.type),t(a).is("fixed",!!l.$slots.default),t(a).is("dot",l.isDot),t(a).is("hide-zero",!l.showZero&&e.value===0),l.badgeClass]),style:j(t(d))},[M(l.$slots,"content",{value:t(o)},()=>[ue(Z(t(o)),1)])],6),[[G,!l.hidden&&(t(o)||l.isDot||l.$slots.content)]])]),_:3},8,["name"])],2))}});var Be=X(Ne,[["__file","badge.vue"]]);const Me=ve(Be),p={},ee=["success","info","warning","error"],c=ke({customClass:"",center:!1,dangerouslyUseHTMLString:!1,duration:3e3,icon:void 0,id:"",message:"",onClose:void 0,showClose:!1,type:"info",plain:!1,offset:16,zIndex:0,grouping:!1,repeatNum:1,appendTo:Y?document.body:void 0}),$e=W({customClass:{type:String,default:c.customClass},center:{type:Boolean,default:c.center},dangerouslyUseHTMLString:{type:Boolean,default:c.dangerouslyUseHTMLString},duration:{type:Number,default:c.duration},icon:{type:ye,default:c.icon},id:{type:String,default:c.id},message:{type:k([String,Object,Function]),default:c.message},onClose:{type:k(Function),default:c.onClose},showClose:{type:Boolean,default:c.showClose},type:{type:String,values:ee,default:c.type},plain:{type:Boolean,default:c.plain},offset:{type:Number,default:c.offset},zIndex:{type:Number,default:c.zIndex},grouping:{type:Boolean,default:c.grouping},repeatNum:{type:Number,default:c.repeatNum}}),xe={destroy:()=>!0},f=ie([]),Ie=s=>{const n=f.findIndex(o=>o.id===s),e=f[n];let a;return n>0&&(a=f[n-1]),{current:e,prev:a}},Oe=s=>{const{prev:n}=Ie(s);return n?n.vm.exposed.bottom.value:0},_e=(s,n)=>f.findIndex(a=>a.id===s)>0?16:n,De=z({name:"ElMessage"}),qe=z({...De,props:$e,emits:xe,setup(s,{expose:n}){const e=s,{Close:a}=Ee,{ns:o,zIndex:d}=he("message"),{currentZIndex:l,nextZIndex:u}=d,i=T(),g=T(!1),v=T(0);let L;const ne=m(()=>e.type?e.type==="error"?"danger":e.type:"info"),te=m(()=>{const r=e.type;return{[o.bm("icon",r)]:r&&A[r]}}),O=m(()=>e.icon||A[e.type]||""),oe=m(()=>Oe(e.id)),_=m(()=>_e(e.id,e.offset)+oe.value),ae=m(()=>v.value+_.value),le=m(()=>({top:`${_.value}px`,zIndex:l.value}));function N(){e.duration!==0&&({stop:L}=Fe(()=>{F()},e.duration))}function D(){L==null||L()}function F(){g.value=!1}function re({code:r}){r===we.esc&&F()}return K(()=>{N(),u(),g.value=!0}),ce(()=>e.repeatNum,()=>{D(),N()}),be(document,"keydown",re),Ce(i,()=>{v.value=i.value.getBoundingClientRect().height}),n({visible:g,bottom:ae,close:F}),(r,je)=>(y(),C(J,{name:t(o).b("fade"),onBeforeLeave:r.onClose,onAfterLeave:Ze=>r.$emit("destroy"),persisted:""},{default:S(()=>[V($("div",{id:r.id,ref_key:"messageRef",ref:i,class:h([t(o).b(),{[t(o).m(r.type)]:r.type},t(o).is("center",r.center),t(o).is("closable",r.showClose),t(o).is("plain",r.plain),r.customClass]),style:j(t(le)),role:"alert",onMouseenter:D,onMouseleave:N},[r.repeatNum>1?(y(),C(t(Me),{key:0,value:r.repeatNum,type:t(ne),class:h(t(o).e("badge"))},null,8,["value","type","class"])):w("v-if",!0),t(O)?(y(),C(t(P),{key:1,class:h([t(o).e("icon"),t(te)])},{default:S(()=>[(y(),C(de(t(O))))]),_:1},8,["class"])):w("v-if",!0),M(r.$slots,"default",{},()=>[r.dangerouslyUseHTMLString?(y(),B(fe,{key:1},[w(" Caution here, message could've been compromised, never use user's input as message "),$("p",{class:h(t(o).e("content")),innerHTML:r.message},null,10,["innerHTML"])],2112)):(y(),B("p",{key:0,class:h(t(o).e("content"))},Z(r.message),3))]),r.showClose?(y(),C(t(P),{key:2,class:h(t(o).e("closeBtn")),onClick:pe(F,["stop"])},{default:S(()=>[I(t(a))]),_:1},8,["class","onClick"])):w("v-if",!0)],46,["id"]),[[G,g.value]])]),_:3},8,["name","onBeforeLeave","onAfterLeave"]))}});var Re=X(qe,[["__file","message.vue"]]);let He=1;const se=s=>{const n=!s||q(s)||Q(s)||x(s)?{message:s}:s,e={...c,...n};if(!e.appendTo)e.appendTo=document.body;else if(q(e.appendTo)){let a=document.querySelector(e.appendTo);Se(a)||(a=document.body),e.appendTo=a}return U(p.grouping)&&!e.grouping&&(e.grouping=p.grouping),E(p.duration)&&e.duration===3e3&&(e.duration=p.duration),E(p.offset)&&e.offset===16&&(e.offset=p.offset),U(p.showClose)&&!e.showClose&&(e.showClose=p.showClose),e},Ae=s=>{const n=f.indexOf(s);if(n===-1)return;f.splice(n,1);const{handler:e}=s;e.close()},Pe=({appendTo:s,...n},e)=>{const a=`message_${He++}`,o=n.onClose,d=document.createElement("div"),l={...n,id:a,onClose:()=>{o==null||o(),Ae(v)},onDestroy:()=>{R(null,d)}},u=I(Re,l,x(l.message)||Q(l.message)?{default:x(l.message)?l.message:()=>l.message}:null);u.appContext=e||b._context,R(u,d),s.appendChild(d.firstElementChild);const i=u.component,v={id:a,vnode:u,vm:i,handler:{close:()=>{i.exposed.visible.value=!1}},props:u.component.props};return v},b=(s={},n)=>{if(!Y)return{close:()=>{}};const e=se(s);if(e.grouping&&f.length){const o=f.find(({vnode:d})=>{var l;return((l=d.props)==null?void 0:l.message)===e.message});if(o)return o.props.repeatNum+=1,o.props.type=e.type,o.handler}if(E(p.max)&&f.length>=p.max)return{close:()=>{}};const a=Pe(e,n);return f.push(a),a.handler};ee.forEach(s=>{b[s]=(n={},e)=>{const a=se(n);return b({...a,type:s},e)}});function Ue(s){for(const n of f)(!s||s===n.props.type)&&n.handler.close()}b.closeAll=Ue;b._context=null;const Ve=Te(b,"$message"),Ke=s=>{const n=T(!1),e=document,a=m(()=>s?s.value instanceof HTMLElement?s.value:s.value.$el:e.documentElement),o=()=>{if(e.fullscreenEnabled||e.webkitFullscreenEnabled||e.mozFullScreenEnabled||e.msFullscreenEnabled){const i=a.value;i.requestFullscreen?i.requestFullscreen():i.webkitRequestFullscreen?i.webkitRequestFullscreen():i.mozRequestFullScreen?i.mozRequestFullScreen():i.msRequestFullscreen&&i.msRequestFullscreen(),n.value=!0}else Ve.warning("当前浏览器不支持全屏")},d=()=>{e.exitFullscreen?e.exitFullscreen():e.webkitExitFullscreen?e.webkitExitFullscreen():e.mozCancelFullScreen?e.mozCancelFullScreen():e.msExitFullscreen&&e.msExitFullscreen()},l=()=>{n.value?d():o()},u=()=>{n.value=!!(e.fullscreenElement||e.webkitFullscreenElement)};return K(()=>{document.addEventListener("fullscreenchange",u),document.addEventListener("webkitfullscreenchange",u),document.addEventListener("mozfullscreenchange",u),document.addEventListener("MSFullscreenChange",u)}),me(()=>{document.removeEventListener("fullscreenchange",u),document.removeEventListener("webkitfullscreenchange",u),document.removeEventListener("mozfullscreenchange",u),document.removeEventListener("MSFullscreenChange",u)}),{isFullscreen:n,enterFullscreen:o,exitFullscreen:d,toggleFullscreen:l}};export{Ke as u};

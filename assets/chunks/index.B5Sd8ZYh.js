import{d as fe,s as G,h as ee,y as Te,R as Le,at as Pe,b as c,I as W,w as g,T as ze,as as We,o as l,aj as Ve,ak as Oe,j as ue,r as K,c as H,D as ne,e as E,E as V,J as de,n as $e,t as we,F as J,P as Me,a as ie,b3 as Ye,b4 as Ke,a6 as Re,M,k as $,av as he,W as ye,ax as ke,v as qe,am as Je,ad as Xe}from"./framework.DXFcsTCa.js";import{p as Ze,q as Ge}from"./theme.NMzFNfJD.js";import{i as Qe,r as xe,f as et,s as tt}from"./aria.kF4utiZ_.js";import{o as ce,a as nt,_ as rt}from"./index.BJ4p_r5y.js";import{u as ot}from"./useFullscreen.Cmk-Jlrh.js";import{i as at,a as lt,b as st,c as ut,g as it,d as ct,e as dt}from"./baseSet.mPa4uSHY.js";import{i as ft}from"./toKey.FhOt6Wdx.js";import{c as De,u as pt}from"./useForm.D7Lkg7eW.js";import{i as Be,u as mt}from"./useTable.fdNC2tzx.js";/* empty css              */const ht={class:"u-context-menu__list"},yt=["onClick"],vt={class:"u-context-menu-item__label"},Ae=fe({name:"UContextMenu",__name:"context-menu",props:{triggerSelectors:{},afterClickHide:{type:Boolean,default:!0},offsetX:{default:0},offsetY:{default:0},manual:{type:Boolean,default:!1},items:{default:()=>[]}},emits:["show","hide","select"],setup(s,{expose:d,emit:D}){const f=s,v=D,O=G(),R=G(!1),n=G({top:100,left:100}),N=ee(()=>({top:`${n.value.top}px`,left:`${n.value.left}px`,visibility:R.value?"visible":"hidden"})),B=Y=>{const{pageX:A,pageY:P,clientX:o,clientY:i}=Y,m=window.innerWidth,k=window.innerHeight,_=O.value;if(!_)return{top:0,left:0};const{offsetWidth:F,offsetHeight:L}=_,C=o+F>m?A-F+f.offsetX:A+f.offsetX;return{top:i+L>k?P-L+f.offsetY:P+f.offsetY,left:C}},q=Y=>{const A=Y.target;if(!A){console.warn("无效的事件目标");return}(!f.triggerSelectors||A.closest(f.triggerSelectors)!==null)&&(Y.preventDefault(),n.value=B(Y),R.value=!0,v("show"),document.addEventListener("click",w))},w=Y=>{const A=Y.target;!f.afterClickHide&&A.closest(".u-context-menu")||(R.value=!1,v("hide"),document.removeEventListener("click",w))},X=Y=>{v("select",Y)};return Te(()=>{f.manual||Le(()=>{document.addEventListener("contextmenu",q)})}),Pe(()=>{document.removeEventListener("contextmenu",q),document.removeEventListener("click",w)}),d({showMenu:q,hideMenu:w}),(Y,A)=>{const P=V("el-icon");return l(),c(We,{to:"body"},[W(ze,{name:"u-context-menu"},{default:g(()=>[Ve(ue("div",{ref_key:"contextMenuRef",ref:O,class:"u-context-menu",style:Me(N.value)},[K(Y.$slots,"default",{},()=>[ue("ul",ht,[(l(!0),H(J,null,ne(Y.items,o=>(l(),H("li",{key:o.name,class:"u-context-menu-item",onClick:i=>X(o)},[o.icon?(l(),c(P,{key:0,class:"u-context-menu-item__icon"},{default:g(()=>[(l(),c(de(o.icon)))]),_:2},1024)):E("",!0),o.iconClass?(l(),H("i",{key:1,class:$e(["u-context-menu-item__icon",o.iconClass])},null,2)):E("",!0),ue("span",vt,we(o.label),1)],8,yt))),128))])])],4),[[Oe,R.value]])]),_:3})])}}}),Fe=Ae;Fe.install=s=>{s.component("UContextMenu",Ae)};const gt=(s,d="children")=>{const D=[],f=v=>{v.forEach(O=>{D.push(O),O!=null&&O[d]&&f(O[d])})};return f(s),D},ve=(s,d,D={})=>{var O;if(d==null)return"";if(Array.isArray(d))return d.map(R=>Array.isArray(R)?R.map(n=>ve(s,n,D)).join("/"):ve(s,R,D)).join("、");const f=D.label||"label",v=D.value||"value";return((O=s.find(R=>R[v]===d))==null?void 0:O[f])??d};var bt="[object Map]",kt="[object Set]",$t=Object.prototype,wt=$t.hasOwnProperty;function Ce(s){if(s==null)return!0;if(at(s)&&(ft(s)||typeof s=="string"||typeof s.splice=="function"||lt(s)||st(s)||ut(s)))return!s.length;var d=it(s);if(d==bt||d==kt)return!s.size;if(ct(s))return!dt(s).length;for(var D in s)if(wt.call(s,D))return!1;return!0}var Ue={exports:{}};(function(s,d){(function(D,f){s.exports=f()})(Ge,function(){var D=1e3,f=6e4,v=36e5,O="millisecond",R="second",n="minute",N="hour",B="day",q="week",w="month",X="quarter",Y="year",A="date",P="Invalid Date",o=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var r=["th","st","nd","rd"],a=e%100;return"["+e+(r[(a-20)%10]||r[a]||r[0])+"]"}},k=function(e,r,a){var u=String(e);return!u||u.length>=r?e:""+Array(r+1-u.length).join(a)+e},_={s:k,z:function(e){var r=-e.utcOffset(),a=Math.abs(r),u=Math.floor(a/60),t=a%60;return(r<=0?"+":"-")+k(u,2,"0")+":"+k(t,2,"0")},m:function e(r,a){if(r.date()<a.date())return-e(a,r);var u=12*(a.year()-r.year())+(a.month()-r.month()),t=r.clone().add(u,w),h=a-t<0,y=r.clone().add(u+(h?-1:1),w);return+(-(u+(a-t)/(h?t-y:y-t))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:w,y:Y,w:q,d:B,D:A,h:N,m:n,s:R,ms:O,Q:X}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},F="en",L={};L[F]=m;var C="$isDayjsObject",U=function(e){return e instanceof te||!(!e||!e[C])},I=function e(r,a,u){var t;if(!r)return F;if(typeof r=="string"){var h=r.toLowerCase();L[h]&&(t=h),a&&(L[h]=a,t=h);var y=r.split("-");if(!t&&y.length>1)return e(y[0])}else{var T=r.name;L[T]=r,t=T}return!u&&t&&(F=t),t||!u&&F},p=function(e,r){if(U(e))return e.clone();var a=typeof r=="object"?r:{};return a.date=e,a.args=arguments,new te(a)},b=_;b.l=I,b.i=U,b.w=function(e,r){return p(e,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var te=function(){function e(a){this.$L=I(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[C]=!0}var r=e.prototype;return r.parse=function(a){this.$d=function(u){var t=u.date,h=u.utc;if(t===null)return new Date(NaN);if(b.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var y=t.match(o);if(y){var T=y[2]-1||0,j=(y[7]||"0").substring(0,3);return h?new Date(Date.UTC(y[1],T,y[3]||1,y[4]||0,y[5]||0,y[6]||0,j)):new Date(y[1],T,y[3]||1,y[4]||0,y[5]||0,y[6]||0,j)}}return new Date(t)}(a),this.init()},r.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},r.$utils=function(){return b},r.isValid=function(){return this.$d.toString()!==P},r.isSame=function(a,u){var t=p(a);return this.startOf(u)<=t&&t<=this.endOf(u)},r.isAfter=function(a,u){return p(a)<this.startOf(u)},r.isBefore=function(a,u){return this.endOf(u)<p(a)},r.$g=function(a,u,t){return b.u(a)?this[u]:this.set(t,a)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(a,u){var t=this,h=!!b.u(u)||u,y=b.p(a),T=function(le,Q){var oe=b.w(t.$u?Date.UTC(t.$y,Q,le):new Date(t.$y,Q,le),t);return h?oe:oe.endOf(B)},j=function(le,Q){return b.w(t.toDate()[le].apply(t.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(Q)),t)},z=this.$W,S=this.$M,Z=this.$D,re="set"+(this.$u?"UTC":"");switch(y){case Y:return h?T(1,0):T(31,11);case w:return h?T(1,S):T(0,S+1);case q:var ae=this.$locale().weekStart||0,pe=(z<ae?z+7:z)-ae;return T(h?Z-pe:Z+(6-pe),S);case B:case A:return j(re+"Hours",0);case N:return j(re+"Minutes",1);case n:return j(re+"Seconds",2);case R:return j(re+"Milliseconds",3);default:return this.clone()}},r.endOf=function(a){return this.startOf(a,!1)},r.$set=function(a,u){var t,h=b.p(a),y="set"+(this.$u?"UTC":""),T=(t={},t[B]=y+"Date",t[A]=y+"Date",t[w]=y+"Month",t[Y]=y+"FullYear",t[N]=y+"Hours",t[n]=y+"Minutes",t[R]=y+"Seconds",t[O]=y+"Milliseconds",t)[h],j=h===B?this.$D+(u-this.$W):u;if(h===w||h===Y){var z=this.clone().set(A,1);z.$d[T](j),z.init(),this.$d=z.set(A,Math.min(this.$D,z.daysInMonth())).$d}else T&&this.$d[T](j);return this.init(),this},r.set=function(a,u){return this.clone().$set(a,u)},r.get=function(a){return this[b.p(a)]()},r.add=function(a,u){var t,h=this;a=Number(a);var y=b.p(u),T=function(S){var Z=p(h);return b.w(Z.date(Z.date()+Math.round(S*a)),h)};if(y===w)return this.set(w,this.$M+a);if(y===Y)return this.set(Y,this.$y+a);if(y===B)return T(1);if(y===q)return T(7);var j=(t={},t[n]=f,t[N]=v,t[R]=D,t)[y]||1,z=this.$d.getTime()+a*j;return b.w(z,this)},r.subtract=function(a,u){return this.add(-1*a,u)},r.format=function(a){var u=this,t=this.$locale();if(!this.isValid())return t.invalidDate||P;var h=a||"YYYY-MM-DDTHH:mm:ssZ",y=b.z(this),T=this.$H,j=this.$m,z=this.$M,S=t.weekdays,Z=t.months,re=t.meridiem,ae=function(Q,oe,me,ge){return Q&&(Q[oe]||Q(u,h))||me[oe].slice(0,ge)},pe=function(Q){return b.s(T%12||12,Q,"0")},le=re||function(Q,oe,me){var ge=Q<12?"AM":"PM";return me?ge.toLowerCase():ge};return h.replace(i,function(Q,oe){return oe||function(me){switch(me){case"YY":return String(u.$y).slice(-2);case"YYYY":return b.s(u.$y,4,"0");case"M":return z+1;case"MM":return b.s(z+1,2,"0");case"MMM":return ae(t.monthsShort,z,Z,3);case"MMMM":return ae(Z,z);case"D":return u.$D;case"DD":return b.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return ae(t.weekdaysMin,u.$W,S,2);case"ddd":return ae(t.weekdaysShort,u.$W,S,3);case"dddd":return S[u.$W];case"H":return String(T);case"HH":return b.s(T,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return le(T,j,!0);case"A":return le(T,j,!1);case"m":return String(j);case"mm":return b.s(j,2,"0");case"s":return String(u.$s);case"ss":return b.s(u.$s,2,"0");case"SSS":return b.s(u.$ms,3,"0");case"Z":return y}return null}(Q)||y.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(a,u,t){var h,y=this,T=b.p(u),j=p(a),z=(j.utcOffset()-this.utcOffset())*f,S=this-j,Z=function(){return b.m(y,j)};switch(T){case Y:h=Z()/12;break;case w:h=Z();break;case X:h=Z()/3;break;case q:h=(S-z)/6048e5;break;case B:h=(S-z)/864e5;break;case N:h=S/v;break;case n:h=S/f;break;case R:h=S/D;break;default:h=S}return t?h:b.a(h)},r.daysInMonth=function(){return this.endOf(w).$D},r.$locale=function(){return L[this.$L]},r.locale=function(a,u){if(!a)return this.$L;var t=this.clone(),h=I(a,u,!0);return h&&(t.$L=h),t},r.clone=function(){return b.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},e}(),se=te.prototype;return p.prototype=se,[["$ms",O],["$s",R],["$m",n],["$H",N],["$W",B],["$M",w],["$y",Y],["$D",A]].forEach(function(e){se[e[1]]=function(r){return this.$g(r,e[0],e[1])}}),p.extend=function(e,r){return e.$i||(e(r,te,p),e.$i=!0),p},p.locale=I,p.isDayjs=U,p.unix=function(e){return p(1e3*e)},p.en=L[F],p.Ls=L,p.p={},p})})(Ue);var _t=Ue.exports;const Se=Ze(_t),be=(s,d="YYYY-MM-DD HH:mm:ss")=>Se(s).isValid()?Se(s).format(d):s,Ct=s=>({year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",date:"YYYY-MM-DD",dates:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",week:"YYYY-MM-DD",datetimerange:"YYYY-MM-DD HH:mm:ss",daterange:"YYYY-MM-DD",monthrange:"YYYY-MM",yearrange:"YYYY"})[s]??"YYYY-MM-DD",x=fe({props:{vNode:{type:[String,Number,Object],required:!0}},setup(s){return()=>s.vNode}}),Mt={class:"u-title-bar__title"},Yt={key:2,class:"u-title-bar__icon default-icon"},Dt={key:0,class:"u-title-bar__toolbar"},_e=fe({name:"UTitleBar",inheritAttrs:!1,__name:"title-bar",props:{title:{default:""},icon:{default:""},iconClass:{},showIcon:{type:Boolean,default:!0}},setup(s){return(d,D)=>{const f=V("el-icon"),v=V("el-text");return l(),H("div",{class:$e(["u-title-bar",d.$attrs.class]),style:Me(d.$attrs.style)},[ue("div",Mt,[d.showIcon?K(d.$slots,"icon",{key:0},()=>[d.icon?(l(),c(f,{key:0,class:"u-title-bar__icon"},{default:g(()=>[(l(),c(de(d.icon)))]),_:1})):d.iconClass?(l(),H("i",{key:1,class:$e(["u-title-bar__icon",d.iconClass])},null,2)):(l(),H("i",Yt))]):E("",!0),W(v,{class:"u-title-bar__text",truncated:"",size:"large"},{default:g(()=>[K(d.$slots,"default",{},()=>[ie(we(d.title),1)])]),_:3})]),d.$slots.toolbar?(l(),H("div",Dt,[K(d.$slots,"toolbar")])):E("",!0)],6)}}}),Ie=fe({name:"UForm",inheritAttrs:!1,__name:"form",props:Ye({view:{type:Boolean,default:!1},columns:{},gutter:{default:20},rules:{},labelPosition:{default:"right"},requireAsteriskPosition:{default:"left"},labelWidth:{default:"auto"},labelSuffix:{default:""},inline:{type:Boolean,default:!1},inlineMessage:{type:Boolean,default:!1},statusIcon:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:{type:Boolean,default:!1},scrollIntoViewOptions:{default:()=>({})},size:{default:"default"},disabled:{type:Boolean,default:!1}},{modelValue:{default:()=>({})},modelModifiers:{}}),emits:Ye(["validate","change"],["update:modelValue"]),setup(s,{expose:d,emit:D}){const f=D,v=Ke(s,"modelValue"),O=s,R=Re(),n=G(),N=ee(()=>ce(O,["view","rules","columns","modelValue"])),B=ee(()=>{const o=Number(O.gutter);if(o>0){const i=o/2;return{marginLeft:`${-i}px`,marginRight:`${-i}px`}}return{}}),q=(o,i,m)=>{f("validate",o,i,m)},w=(o,i)=>{f("change",o,i)},X=o=>ce(o,["span","element","value","attrs","if","show","style","slot"]),Y=o=>{const i=["autocomplete","input","input-number","input-tag","mention"].includes(o.element),m=o.element?i?"请输入":"请选择":"请输入";return o.required&&!o.rules?[{required:!0,message:m}]:o.rules?o.rules.map(k=>({message:m,...k})):[]},A=o=>{var _;const i=(o==null?void 0:o.style)??{},m=((_=o.span)==null?void 0:_.split("/"))??[],k=Number(O.gutter);if(k>0){const F=k/2;i.paddingLeft=`${F}px`,i.paddingRight=`${F}px`}if(O.inline||(i.width="100%"),m.length===2){const F=parseInt(m[0]),L=parseInt(m[1]);F>0&&L>0&&F<=L?i.width=`${F/L*100}%`:console.warn(`表单项【${o.prop}】的【span】属性配置错误，请检查配置; 正确格式如：1/2`)}return i},P=o=>{const i=v.value[o.prop];if(i==null)return"";if(o.element==="cascader"){const{props:m={},options:k=[]}=o.attrs??{},_=gt(k,m.children);return ve(_,i,m)}else if(o.element==="transfer"){const{props:m={},data:k=[]}=o.attrs??{};return ve(k,i,{label:m.label,value:m.key??"key"})}else if(["select","checkbox-group","radio-group"].includes(o.element)){const{options:m=[]}=o.attrs;return ve(m,i)}else if(o.element==="switch"){const{activeText:m="是",inactiveText:k="否",activeValue:_=!0}=o.attrs??{};return i===_?m:k}else if(["time-picker","time-select"].includes(o.element)){const{format:m="HH:mm:ss"}=o.attrs??{};return Array.isArray(i)?i.map(k=>be(k,m)).join("-"):be(i,m)}else if(o.element==="date-picker"){const{type:m="date",format:k}=o.attrs??{};let _=Ct(m);return k&&(_=k),Array.isArray(i)?i.map(F=>be(F,_)).join("-"):be(i,_)}return(i==null?void 0:i.toString())??""};return d(new Proxy({},{get(o,i){var k;return(((k=R.refs)==null?void 0:k.formRef)??{})[i]},has(o,i){return Reflect.has(n.value,i)}})),(o,i)=>{const m=V("el-icon"),k=V("el-tooltip"),_=V("el-rate"),F=V("el-upload"),L=V("el-cascader"),C=V("el-button"),U=V("el-checkbox"),I=V("el-radio"),p=V("el-option"),b=V("el-text"),te=V("el-form-item"),se=V("el-form");return l(),c(se,M({class:"u-form",ref_key:"formRef",ref:n},N.value,{model:v.value,style:B.value,onValidate:q,class:o.$attrs.class}),{default:g(()=>[(l(!0),H(J,null,ne(o.columns,e=>(l(),H(J,{key:e.prop},[(e==null?void 0:e.rendered)??!0?Ve((l(),c(te,M({key:0},X(e),{prop:e.prop,rules:Y(e),style:A(e),class:["u-form-item",e.element==="title-bar"?"u-form-item--title-bar":""],label:e.element==="title-bar"?"":e.label}),{label:g(r=>[o.$slots[`label-${e.prop}`]?K(o.$slots,`label-${e.prop}`,M({key:0,item:e},r)):e.renderLabel?(l(),c($(x),{key:1,"v-node":e.renderLabel({item:e,label:r.label})},null,8,["v-node"])):(l(),H(J,{key:2},[ie(we(e.label)+" ",1),e.tooltip?(l(),c(k,{key:0,content:e.tooltip,placement:"top"},{default:g(()=>[K(o.$slots,"tooltip-icon",{},()=>[W(m,{class:"u-form-item__tooltip-icon"},{default:g(()=>[W($(Qe))]),_:1})])]),_:2},1032,["content"])):E("",!0)],64))]),error:g(r=>[o.$slots[`error-${e.prop}`]?K(o.$slots,`error-${e.prop}`,M({key:0,item:e},r)):e.renderError?(l(),c($(x),{key:1,"v-node":e.renderError({item:e,error:r.error})},null,8,["v-node"])):E("",!0)]),default:g(()=>{var r,a,u;return[(o.view||e.view)&&e.element!=="title-bar"?(l(),H(J,{key:0},[e.formatter?(l(),c($(x),{key:0,"v-node":e.formatter(e)},null,8,["v-node"])):e.element==="rate"?(l(),c(_,M({key:1,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{disabled:!0}),null,16,["modelValue","onUpdate:modelValue"])):e.element==="upload"?(l(),c(F,M({key:2,"file-list":v.value[e.prop]},e.attrs,{disabled:!0,class:"is-view"}),null,16,["file-list"])):(l(),c($(x),{key:3,"v-node":P(e)},null,8,["v-node"]))],64)):o.$slots[e.prop]?K(o.$slots,e.prop,{key:1,item:e}):e.render?(l(),c($(x),{key:2,"v-node":e.render({item:e,view:o.view})},null,8,["v-node"])):e.component?(l(),c(de(e.component),M({key:3,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{view:o.view,onChange:t=>w(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","view","onChange"])):e.element?(l(),H(J,{key:4},[e.element==="title-bar"?(l(),c(_e,M({key:0,title:e.label},e.attrs),he({_:2},[(r=e.attrs)!=null&&r.renderIcon?{name:"icon",fn:g(()=>[W($(x),{"v-node":e.attrs.renderIcon()},null,8,["v-node"])]),key:"0"}:void 0,(a=e.attrs)!=null&&a.renderToolbar?{name:"toolbar",fn:g(()=>[W($(x),{"v-node":e.attrs.renderToolbar()},null,8,["v-node"])]),key:"1"}:void 0,(u=e.attrs)!=null&&u.render?{name:"default",fn:g(()=>[W($(x),{"v-node":e.attrs.render()},null,8,["v-node"])]),key:"2"}:void 0]),1040,["title"])):e.element==="cascader"?(l(),c(L,M({key:1,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>w(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):e.element==="upload"?(l(),c(F,M({key:2,"file-list":v.value[e.prop],"onUpdate:fileList":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>w(e.prop,e)}),{default:g(()=>{var t;return[((t=e.attrs)==null?void 0:t.listType)!=="picture-card"?(l(),c(C,{key:0,type:"primary"},{default:g(()=>[ie(" 点击上传 ")]),_:1})):E("",!0)]}),_:2},1040,["file-list","onUpdate:fileList","onChange"])):e.element==="checkbox"?(l(),c(U,M({key:3,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>w(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):e.element==="radio"?(l(),c(I,M({key:4,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>w(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):(l(),c(de(`el-${e.element}`),M({key:5,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>w(e.prop,e)}),{default:g(()=>[e.attrs&&e.attrs.options?(l(),H(J,{key:0},[e.element==="select"?(l(!0),H(J,{key:0},ne(e.attrs.options,t=>(l(),c(p,M({key:t.value},t),null,16))),128)):e.element==="checkbox-group"?(l(!0),H(J,{key:1},ne(e.attrs.options,t=>(l(),c(U,M({key:t.value},t),null,16))),128)):e.element==="radio-group"?(l(!0),H(J,{key:2},ne(e.attrs.options,t=>(l(),c(I,M({key:t.value},t),null,16))),128)):E("",!0)],64)):E("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"]))],64)):(l(),c(b,{key:5,type:"danger"},{default:g(()=>[ie(we(`请检查表单项【${e.prop}】的配置`),1)]),_:2},1024))]}),_:2},1040,["prop","rules","style","class","label"])),[[Oe,(e==null?void 0:e.display)??!0]]):E("",!0)],64))),128)),o.inline?(l(),c(te,{key:0,class:"u-form-item--searchbar",style:Me(A({prop:"_searchbar"}))},{default:g(()=>[K(o.$slots,"searchbar")]),_:3},8,["style"])):E("",!0)]),_:3},16,["model","style","class"])}}}),He=Ie;He.install=s=>{s.component("UForm",Ie)};const St=s=>({getElTableColumnAttrs:ee(()=>ce(s.item,["children","formatter","render","component","rendered","element","rules","attrs","renderHeader"])),getFormItemRules:f=>f.required?[{required:!0,message:"请输入"}]:f.rules?f.rules.map(v=>({message:"请输入",...v})):[]}),Tt=fe({__name:"table-column",props:{item:{},editable:{type:Boolean}},emits:["click-operation"],setup(s,{emit:d}){const D=s,f=d,{getElTableColumnAttrs:v,getFormItemRules:O}=St(D),R=ee(()=>{const{prop:n,rendered:N=!0,show:B=!0}=D.item;return typeof N=="function"?n&&N(D.item)&&B:n&&N&&B});return(n,N)=>{const B=V("TableColumn",!0),q=V("el-cascader"),w=V("el-checkbox"),X=V("el-radio"),Y=V("el-option"),A=V("el-form-item"),P=V("el-table-column");return R.value?(l(),c(P,ye(M({key:0},$(v))),{header:g(o=>[n.$slots[`header-${n.item.prop}`]?K(n.$slots,`header-${n.item.prop}`,M({key:0},o,{item:n.item})):n.item.renderHeader?(l(),c($(x),{key:1,"v-node":n.item.renderHeader({...o,item:n.item})},null,8,["v-node"])):E("",!0)]),"filter-icon":g(o=>[n.$slots[`filter-icon-${n.item.prop}`]?K(n.$slots,`filter-icon-${n.item.prop}`,M({key:0},o,{item:n.item})):n.item.renderFilterIcon?(l(),c($(x),{key:1,"v-node":n.item.renderFilterIcon({...o,item:n.item})},null,8,["v-node"])):E("",!0)]),default:g(o=>[n.item.children?(l(!0),H(J,{key:0},ne(n.item.children,i=>(l(),c(B,{key:i.prop,item:i,editable:n.editable},he({_:2},[ne(Object.keys(n.$slots),m=>({name:m,fn:g(k=>[K(n.$slots,m,ye(ke(k)))])}))]),1032,["item","editable"]))),128)):o.$index>-1&&n.editable&&n.item.element?(l(),c(A,{key:1,prop:`${o.$index}.${n.item.prop}`,rules:$(O)(n.item)},{default:g(()=>[n.item.element==="cascader"?(l(),c(q,M({key:0,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):n.item.element==="checkbox"?(l(),c(w,M({key:1,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):n.item.element==="radio"?(l(),c(X,M({key:2,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):(l(),c(de(`el-${n.item.element}`),M({key:3,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),{default:g(()=>{var i,m,k;return[n.item.element==="select"?(l(!0),H(J,{key:0},ne(((i=n.item.attrs)==null?void 0:i.options)??[],_=>(l(),c(Y,M({key:_.value},_),null,16))),128)):n.item.element==="checkbox-group"?(l(!0),H(J,{key:1},ne(((m=n.item.attrs)==null?void 0:m.options)??[],_=>(l(),c(w,M({key:_.value},_),null,16))),128)):n.item.element==="radio-group"?(l(!0),H(J,{key:2},ne(((k=n.item.attrs)==null?void 0:k.options)??[],_=>(l(),c(X,M({key:_.value},_),null,16))),128)):E("",!0)]}),_:2},1040,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])):n.$slots[n.item.prop]?K(n.$slots,n.item.prop,M({key:2},o,{item:n.item})):n.item.component?(l(),H(J,{key:3},[n.item.component==="operation"?(l(),c(nt,M({key:0,slotProps:o,item:n.item},n.item.attrs,{onClickOperation:N[0]||(N[0]=(...i)=>f("click-operation",...i))}),null,16,["slotProps","item"])):(l(),c(de(n.item.component),M({key:1,slotProps:o,item:n.item},n.item.attrs),null,16,["slotProps","item"]))],64)):n.item.formatter?(l(),c($(x),{key:4,"v-node":n.item.formatter({...o,item:n.item})},null,8,["v-node"])):E("",!0)]),_:3},16)):E("",!0)}}}),Vt=(s,d)=>{const D=G(),f=G([]),v=G(!1),O=G([]),R=ee(()=>Array.isArray(s.toolbar)?s.toolbar.length>0:s.toolbar),n=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("refresh"):s.toolbar===!0),N=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("fullscreen"):s.toolbar===!0),B=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("setting"):s.toolbar===!0),q=()=>{d("refresh")},w=G(),{isFullscreen:X,toggleFullscreen:Y}=ot(w),A=ee(()=>{let C=0;const U=I=>{I.forEach(p=>{C++,Ce(p.children)||U(p.children)})};return U(f.value),C}),P=(C,U,I)=>(U.forEach(p=>{Be(I)||(p.show=I);const{rendered:b=!0,show:te=!0}=p;typeof b=="function"?b(p)&&te&&C.push(p.prop):b&&te&&C.push(p.prop),p.children&&P(C,p.children,I)}),C),o=C=>{var I;const U=P([],f.value,C);(I=D.value)==null||I.setCheckedKeys(U)},i=(C,U,I)=>{!Ce(C.children)&&I?C.show=!0:C.show=U;const p=D.value.getCheckedNodes().length||0;k.value=p<A.value&&p!==0,m.value=p===A.value},m=G(!0),k=G(!1),_=()=>{o(m.value)},F=(C,U,I)=>{if(I==="inner")return!1;const p=C.parent,b=U.parent;return p===b},L=()=>{f.value=De(O.value)};return qe(()=>s.columns,C=>{Ce(C)||(O.value=De(C),v.value=!0),f.value=C},{immediate:!0}),{_columns:f,showToolbar:R,showRefresh:n,showFullscreen:N,showSetting:B,uTableRef:w,handleRefresh:q,isFullscreen:X,toggleFullscreen:Y,treeRef:D,setCheckedKeys:o,checkedAll:m,checkedIndeterminate:k,handleChangeCheckedAll:_,handleResetColumns:L,handleCheckChange:i,allowDrop:F}},Ot={class:"u-table-setting"},Rt={class:"u-table-setting-header"},Ee=fe({name:"UTable",__name:"table",props:{columns:{},editable:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},selectionProps:{default:()=>({})},showIndex:{type:Boolean,default:!1},indexProps:{default:()=>({})},showExpand:{type:Boolean,default:!1},expandProps:{default:()=>({})},showTitleBar:{type:Boolean,default:!0},title:{},toolbar:{type:[Boolean,Array],default:!0},data:{},size:{},width:{},height:{},maxHeight:{},fit:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},rowKey:{},context:{},showHeader:{type:Boolean,default:!0},showSummary:{type:Boolean,default:!1},sumText:{},summaryMethod:{},rowClassName:{},rowStyle:{},cellClassName:{},cellStyle:{},headerRowClassName:{},headerRowStyle:{},headerCellClassName:{},headerCellStyle:{},highlightCurrentRow:{type:Boolean,default:!1},currentRowKey:{},emptyText:{},expandRowKeys:{},defaultExpandAll:{type:Boolean,default:!1},defaultSort:{},tooltipEffect:{},tooltipOptions:{},spanMethod:{},selectOnIndeterminate:{type:Boolean,default:!0},indent:{},treeProps:{},lazy:{type:Boolean,default:!1},load:{},className:{},style:{},tableLayout:{},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:{type:Boolean,default:!1},showOverflowTooltip:{type:[Boolean,Object],default:!1},tooltipFormatter:{},appendFilterPanelTo:{},scrollbarTabindex:{}},emits:["click-operation","refresh"],setup(s,{expose:d,emit:D}){const f=s,v=D,O=Re(),R=G(),n=G(),N=ee(()=>ce(f.indexProps,["formatter","renderHeader"])),B=ee(()=>ce(f.selectionProps,["formatter","renderHeader"])),q=Je(),w=ee(()=>{const e=Object.keys(f).filter(r=>Be(f[r]));return e.push("columns","editable"),ce({...f,...q},e)}),X=(e,r,a)=>{v("click-operation",e,r,a)},{_columns:Y,showToolbar:A,showRefresh:P,showFullscreen:o,showSetting:i,uTableRef:m,handleRefresh:k,isFullscreen:_,toggleFullscreen:F,treeRef:L,setCheckedKeys:C,checkedAll:U,checkedIndeterminate:I,handleChangeCheckedAll:p,handleResetColumns:b,handleCheckChange:te,allowDrop:se}=Vt(f,v);return d(new Proxy({},{get(e,r){var u;return r==="validate"?n.value.validate:r==="validateField"?n.value.validateField:r==="scrollToField"?n.value.scrollToField:r==="resetFields"?n.value.resetFields:r==="clearValidate"?n.value.clearValidate:(((u=O.refs)==null?void 0:u.tableRef)??{})[r]},has(e,r){return Reflect.has(R.value,r)||Reflect.has(n.value,r)}})),(e,r)=>{const a=V("el-button"),u=V("el-tooltip"),t=V("el-checkbox"),h=V("el-tree"),y=V("el-popover"),T=V("el-table-column"),j=V("el-table"),z=V("el-form");return l(),H("div",{class:$e(["u-table",{"is-fullscreen":$(_)}]),ref_key:"uTableRef",ref:m},[e.showTitleBar?(l(),c(_e,{key:0,title:e.title,"show-icon":!1},{default:g(()=>[K(e.$slots,"title")]),toolbar:g(()=>[K(e.$slots,"toolbar"),$(A)?(l(),H(J,{key:0},[$(P)?(l(),c(u,{key:0,content:"刷新",placement:"top",teleported:!1},{default:g(()=>[W(a,{circle:"",icon:$(xe),onClick:$(k)},null,8,["icon","onClick"])]),_:1})):E("",!0),$(o)?(l(),c(u,{key:1,content:$(_)?"退出全屏":"全屏",placement:"top",teleported:!1},{default:g(()=>[W(a,{circle:"",icon:$(et),onClick:r[0]||(r[0]=S=>$(F)())},null,8,["icon"])]),_:1},8,["content"])):E("",!0),$(i)?(l(),c(u,{key:2,content:"设置",placement:"top",teleported:!1},{default:g(()=>[W(a,{circle:""},{default:g(()=>[W(y,{placement:"bottom-end",trigger:"click",onBeforeEnter:r[2]||(r[2]=S=>$(C)()),"popper-class":"u-table-setting-popper",teleported:!1},{reference:g(()=>[W(a,{circle:"",icon:$(tt)},null,8,["icon"])]),default:g(()=>[ue("div",Ot,[ue("div",Rt,[W(t,{modelValue:$(U),"onUpdate:modelValue":r[1]||(r[1]=S=>Xe(U)?U.value=S:null),onChange:$(p),indeterminate:$(I)},{default:g(()=>[ie("全选")]),_:1},8,["modelValue","onChange","indeterminate"]),W(a,{type:"primary",link:"",onClick:$(b)},{default:g(()=>[ie("重置")]),_:1},8,["onClick"])]),W(h,{ref_key:"treeRef",ref:L,data:$(Y),"node-key":"prop","show-checkbox":"",draggable:"","allow-drop":$(se),onCheckChange:$(te)},null,8,["data","allow-drop","onCheckChange"])])]),_:1})]),_:1})]),_:1})):E("",!0)],64)):E("",!0)]),_:3},8,["title"])):E("",!0),W(z,{ref_key:"formRef",ref:n,model:e.data,"show-message":!1},{default:g(()=>[W(j,M({ref_key:"tableRef",ref:R},w.value),he({default:g(()=>[e.showExpand?(l(),c(T,M({key:0,type:"expand"},e.expandProps),{default:g(S=>[K(e.$slots,"expand",ye(ke(S)))]),_:3},16)):E("",!0),e.showIndex?(l(),c(T,M({key:1,type:"index"},N.value),he({_:2},[e.indexProps.renderHeader?{name:"header",fn:g(S=>[W($(x),{"v-node":e.indexProps.renderHeader(S)},null,8,["v-node"])]),key:"0"}:void 0,e.indexProps.formatter?{name:"default",fn:g(S=>[W($(x),{"v-node":e.indexProps.formatter(S)},null,8,["v-node"])]),key:"1"}:void 0]),1040)):E("",!0),e.showSelection?(l(),c(T,M({key:2,type:"selection"},B.value),null,16)):E("",!0),(l(!0),H(J,null,ne($(Y),S=>(l(),c(Tt,{key:S.prop,item:S,editable:e.editable,onClickOperation:X},he({_:2},[ne(Object.keys(e.$slots),Z=>({name:Z,fn:g(re=>[K(e.$slots,Z,ye(ke(re)))])}))]),1032,["item","editable"]))),128))]),_:2},[e.$slots.empty?{name:"empty",fn:g(()=>[K(e.$slots,"empty")]),key:"0"}:void 0,e.$slots.append?{name:"append",fn:g(S=>[K(e.$slots,"append",ye(ke(S)))]),key:"1"}:void 0]),1040)]),_:3},8,["model"])],2)}}}),Ne=Ee;Ne.install=s=>{s.component("UTable",Ee)};const je=_e;je.install=s=>{s.component("UTitleBar",_e)};const Wt=(s,d={})=>{const{auto:D=!0,isShallow:f=!0,defaultFormData:v={},defaultPageSize:O=10}=d,R=G(!1),n=G({pageNum:1,pageSize:O,total:0}),{formRef:N,formData:B,formOptions:q,setFormOptions:w,updateFormItemOption:X,getFormData:Y}=pt(()=>v,!1);Y();const{tableRef:A,tableData:P,tableColumns:o,tableOperations:i,multipleSelection:m,handleSelectionChange:k,toggleTableColumnRendered:_,setTableColumns:F,setTableOperations:L}=mt(()=>[],{auto:!1,isShallow:f}),C=async()=>{R.value=!0;const p={...B.value,pageNum:n.value.pageNum,pageSize:n.value.pageSize},b=await s(p);P.value=b.rows,n.value.total=b.total},U=async p=>{n.value.pageNum=1,B.value={...B.value,...p},await C()},I=async p=>{n.value.pageNum=1,B.value={...v,...p},await C()};return Te(()=>{D&&C()}),{loading:R,formRef:N,formData:B,formOptions:q,setFormOptions:w,updateFormItemOption:X,tableRef:A,tableData:P,tableColumns:o,tableOperations:i,multipleSelection:m,handleSelectionChange:k,toggleTableColumnRendered:_,setTableColumns:F,setTableOperations:L,pagerParams:n,fetchData:C,query:U,reset:I}},Bt=[He,Ne,Fe,rt,je],At=s=>{Bt.forEach(d=>{s.component(d.name,d)})},Kt={install:At};export{Fe as UContextMenu,He as UForm,rt as UOperation,Ne as UTable,je as UTitleBar,Kt as default,At as install,pt as useForm,ot as useFullscreen,Wt as usePage,mt as useTable};

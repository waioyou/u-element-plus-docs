import{d as fe,s as G,h as ee,y as Se,R as je,at as Pe,b as c,I as W,w as b,T as ze,as as We,o as l,aj as Te,ak as Ve,j as ue,r as q,c as E,D as te,e as L,E as V,J as de,n as $e,t as we,F as J,P as Oe,a as ie,b3 as Me,b4 as Ke,a6 as Be,M,k as w,av as he,W as ye,ax as ke,v as qe,am as Je,ad as Xe}from"./framework.DXFcsTCa.js";import{o as Ze,p as Ge}from"./theme.Bkx5W1t2.js";import{i as Qe,r as xe,f as et,s as tt}from"./aria.69DFaF0t.js";import{b as nt,i as rt,a as ot,c as at,d as lt,g as st,e as ut,f as it,o as ce,h as ct,_ as dt}from"./index.D2L2haS7.js";import{u as ft}from"./useFullscreen.B3fxGg1U.js";import{i as pt}from"./toKey.F74rjvgn.js";import{i as Re,u as mt}from"./useTable.fdNC2tzx.js";/* empty css              */import{u as ht}from"./useForm.kRG3sXNA.js";import"./baseSet.BAahPqoT.js";const yt={class:"u-context-menu__list"},vt=["onClick"],gt={class:"u-context-menu-item__label"},Ae=fe({name:"UContextMenu",__name:"context-menu",props:{triggerSelectors:{},afterClickHide:{type:Boolean,default:!0},offsetX:{default:0},offsetY:{default:0},manual:{type:Boolean,default:!1},items:{default:()=>[]}},emits:["show","hide","select"],setup(s,{expose:f,emit:D}){const p=s,v=D,O=G(),B=G(!1),n=G({top:100,left:100}),H=ee(()=>({top:`${n.value.top}px`,left:`${n.value.left}px`,visibility:B.value?"visible":"hidden"})),R=Y=>{const{pageX:A,pageY:P,clientX:o,clientY:i}=Y,d=window.innerWidth,k=window.innerHeight,C=O.value;if(!C)return{top:0,left:0};const{offsetWidth:j,offsetHeight:F}=C,$=o+j>d?A-j+p.offsetX:A+p.offsetX;return{top:i+F>k?P-F+p.offsetY:P+p.offsetY,left:$}},K=Y=>{const A=Y.target;if(!A){console.warn("无效的事件目标");return}(!p.triggerSelectors||A.closest(p.triggerSelectors)!==null)&&(Y.preventDefault(),n.value=R(Y),B.value=!0,v("show"),document.addEventListener("click",_))},_=Y=>{const A=Y.target;!p.afterClickHide&&A.closest(".u-context-menu")||(B.value=!1,v("hide"),document.removeEventListener("click",_))},X=Y=>{v("select",Y)};return Se(()=>{p.manual||je(()=>{document.addEventListener("contextmenu",K)})}),Pe(()=>{document.removeEventListener("contextmenu",K),document.removeEventListener("click",_)}),f({showMenu:K,hideMenu:_}),(Y,A)=>{const P=V("el-icon");return l(),c(We,{to:"body"},[W(ze,{name:"u-context-menu"},{default:b(()=>[Te(ue("div",{ref_key:"contextMenuRef",ref:O,class:"u-context-menu",style:Oe(H.value)},[q(Y.$slots,"default",{},()=>[ue("ul",yt,[(l(!0),E(J,null,te(Y.items,o=>(l(),E("li",{key:o.name,class:"u-context-menu-item",onClick:i=>X(o)},[o.icon?(l(),c(P,{key:0,class:"u-context-menu-item__icon"},{default:b(()=>[(l(),c(de(o.icon)))]),_:2},1024)):L("",!0),o.iconClass?(l(),E("i",{key:1,class:$e(["u-context-menu-item__icon",o.iconClass])},null,2)):L("",!0),ue("span",gt,we(o.label),1)],8,vt))),128))])])],4),[[Ve,B.value]])]),_:3})])}}}),Fe=Ae;Fe.install=s=>{s.component("UContextMenu",Ae)};const bt=(s,f="children")=>{const D=[],p=v=>{v.forEach(O=>{D.push(O),O!=null&&O[f]&&p(O[f])})};return p(s),D},ve=(s,f,D={})=>{var O;if(f==null)return"";if(Array.isArray(f))return f.map(B=>Array.isArray(B)?B.map(n=>ve(s,n,D)).join("/"):ve(s,B,D)).join("、");const p=D.label||"label",v=D.value||"value";return((O=s.find(B=>B[v]===f))==null?void 0:O[p])??f};var kt=1,$t=4;function Ye(s){return nt(s,kt|$t)}var wt="[object Map]",_t="[object Set]",Ct=Object.prototype,Mt=Ct.hasOwnProperty;function Ce(s){if(s==null)return!0;if(rt(s)&&(pt(s)||typeof s=="string"||typeof s.splice=="function"||ot(s)||at(s)||lt(s)))return!s.length;var f=st(s);if(f==wt||f==_t)return!s.size;if(ut(s))return!it(s).length;for(var D in s)if(Mt.call(s,D))return!1;return!0}var Ue={exports:{}};(function(s,f){(function(D,p){s.exports=p()})(Ge,function(){var D=1e3,p=6e4,v=36e5,O="millisecond",B="second",n="minute",H="hour",R="day",K="week",_="month",X="quarter",Y="year",A="date",P="Invalid Date",o=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,i=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,d={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(e){var r=["th","st","nd","rd"],a=e%100;return"["+e+(r[(a-20)%10]||r[a]||r[0])+"]"}},k=function(e,r,a){var u=String(e);return!u||u.length>=r?e:""+Array(r+1-u.length).join(a)+e},C={s:k,z:function(e){var r=-e.utcOffset(),a=Math.abs(r),u=Math.floor(a/60),t=a%60;return(r<=0?"+":"-")+k(u,2,"0")+":"+k(t,2,"0")},m:function e(r,a){if(r.date()<a.date())return-e(a,r);var u=12*(a.year()-r.year())+(a.month()-r.month()),t=r.clone().add(u,_),h=a-t<0,y=r.clone().add(u+(h?-1:1),_);return+(-(u+(a-t)/(h?t-y:y-t))||0)},a:function(e){return e<0?Math.ceil(e)||0:Math.floor(e)},p:function(e){return{M:_,y:Y,w:K,d:R,D:A,h:H,m:n,s:B,ms:O,Q:X}[e]||String(e||"").toLowerCase().replace(/s$/,"")},u:function(e){return e===void 0}},j="en",F={};F[j]=d;var $="$isDayjsObject",U=function(e){return e instanceof ne||!(!e||!e[$])},I=function e(r,a,u){var t;if(!r)return j;if(typeof r=="string"){var h=r.toLowerCase();F[h]&&(t=h),a&&(F[h]=a,t=h);var y=r.split("-");if(!t&&y.length>1)return e(y[0])}else{var T=r.name;F[T]=r,t=T}return!u&&t&&(j=t),t||!u&&j},m=function(e,r){if(U(e))return e.clone();var a=typeof r=="object"?r:{};return a.date=e,a.args=arguments,new ne(a)},g=C;g.l=I,g.i=U,g.w=function(e,r){return m(e,{locale:r.$L,utc:r.$u,x:r.$x,$offset:r.$offset})};var ne=function(){function e(a){this.$L=I(a.locale,null,!0),this.parse(a),this.$x=this.$x||a.x||{},this[$]=!0}var r=e.prototype;return r.parse=function(a){this.$d=function(u){var t=u.date,h=u.utc;if(t===null)return new Date(NaN);if(g.u(t))return new Date;if(t instanceof Date)return new Date(t);if(typeof t=="string"&&!/Z$/i.test(t)){var y=t.match(o);if(y){var T=y[2]-1||0,N=(y[7]||"0").substring(0,3);return h?new Date(Date.UTC(y[1],T,y[3]||1,y[4]||0,y[5]||0,y[6]||0,N)):new Date(y[1],T,y[3]||1,y[4]||0,y[5]||0,y[6]||0,N)}}return new Date(t)}(a),this.init()},r.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},r.$utils=function(){return g},r.isValid=function(){return this.$d.toString()!==P},r.isSame=function(a,u){var t=m(a);return this.startOf(u)<=t&&t<=this.endOf(u)},r.isAfter=function(a,u){return m(a)<this.startOf(u)},r.isBefore=function(a,u){return this.endOf(u)<m(a)},r.$g=function(a,u,t){return g.u(a)?this[u]:this.set(t,a)},r.unix=function(){return Math.floor(this.valueOf()/1e3)},r.valueOf=function(){return this.$d.getTime()},r.startOf=function(a,u){var t=this,h=!!g.u(u)||u,y=g.p(a),T=function(le,Q){var oe=g.w(t.$u?Date.UTC(t.$y,Q,le):new Date(t.$y,Q,le),t);return h?oe:oe.endOf(R)},N=function(le,Q){return g.w(t.toDate()[le].apply(t.toDate("s"),(h?[0,0,0,0]:[23,59,59,999]).slice(Q)),t)},z=this.$W,S=this.$M,Z=this.$D,re="set"+(this.$u?"UTC":"");switch(y){case Y:return h?T(1,0):T(31,11);case _:return h?T(1,S):T(0,S+1);case K:var ae=this.$locale().weekStart||0,pe=(z<ae?z+7:z)-ae;return T(h?Z-pe:Z+(6-pe),S);case R:case A:return N(re+"Hours",0);case H:return N(re+"Minutes",1);case n:return N(re+"Seconds",2);case B:return N(re+"Milliseconds",3);default:return this.clone()}},r.endOf=function(a){return this.startOf(a,!1)},r.$set=function(a,u){var t,h=g.p(a),y="set"+(this.$u?"UTC":""),T=(t={},t[R]=y+"Date",t[A]=y+"Date",t[_]=y+"Month",t[Y]=y+"FullYear",t[H]=y+"Hours",t[n]=y+"Minutes",t[B]=y+"Seconds",t[O]=y+"Milliseconds",t)[h],N=h===R?this.$D+(u-this.$W):u;if(h===_||h===Y){var z=this.clone().set(A,1);z.$d[T](N),z.init(),this.$d=z.set(A,Math.min(this.$D,z.daysInMonth())).$d}else T&&this.$d[T](N);return this.init(),this},r.set=function(a,u){return this.clone().$set(a,u)},r.get=function(a){return this[g.p(a)]()},r.add=function(a,u){var t,h=this;a=Number(a);var y=g.p(u),T=function(S){var Z=m(h);return g.w(Z.date(Z.date()+Math.round(S*a)),h)};if(y===_)return this.set(_,this.$M+a);if(y===Y)return this.set(Y,this.$y+a);if(y===R)return T(1);if(y===K)return T(7);var N=(t={},t[n]=p,t[H]=v,t[B]=D,t)[y]||1,z=this.$d.getTime()+a*N;return g.w(z,this)},r.subtract=function(a,u){return this.add(-1*a,u)},r.format=function(a){var u=this,t=this.$locale();if(!this.isValid())return t.invalidDate||P;var h=a||"YYYY-MM-DDTHH:mm:ssZ",y=g.z(this),T=this.$H,N=this.$m,z=this.$M,S=t.weekdays,Z=t.months,re=t.meridiem,ae=function(Q,oe,me,ge){return Q&&(Q[oe]||Q(u,h))||me[oe].slice(0,ge)},pe=function(Q){return g.s(T%12||12,Q,"0")},le=re||function(Q,oe,me){var ge=Q<12?"AM":"PM";return me?ge.toLowerCase():ge};return h.replace(i,function(Q,oe){return oe||function(me){switch(me){case"YY":return String(u.$y).slice(-2);case"YYYY":return g.s(u.$y,4,"0");case"M":return z+1;case"MM":return g.s(z+1,2,"0");case"MMM":return ae(t.monthsShort,z,Z,3);case"MMMM":return ae(Z,z);case"D":return u.$D;case"DD":return g.s(u.$D,2,"0");case"d":return String(u.$W);case"dd":return ae(t.weekdaysMin,u.$W,S,2);case"ddd":return ae(t.weekdaysShort,u.$W,S,3);case"dddd":return S[u.$W];case"H":return String(T);case"HH":return g.s(T,2,"0");case"h":return pe(1);case"hh":return pe(2);case"a":return le(T,N,!0);case"A":return le(T,N,!1);case"m":return String(N);case"mm":return g.s(N,2,"0");case"s":return String(u.$s);case"ss":return g.s(u.$s,2,"0");case"SSS":return g.s(u.$ms,3,"0");case"Z":return y}return null}(Q)||y.replace(":","")})},r.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},r.diff=function(a,u,t){var h,y=this,T=g.p(u),N=m(a),z=(N.utcOffset()-this.utcOffset())*p,S=this-N,Z=function(){return g.m(y,N)};switch(T){case Y:h=Z()/12;break;case _:h=Z();break;case X:h=Z()/3;break;case K:h=(S-z)/6048e5;break;case R:h=(S-z)/864e5;break;case H:h=S/v;break;case n:h=S/p;break;case B:h=S/D;break;default:h=S}return t?h:g.a(h)},r.daysInMonth=function(){return this.endOf(_).$D},r.$locale=function(){return F[this.$L]},r.locale=function(a,u){if(!a)return this.$L;var t=this.clone(),h=I(a,u,!0);return h&&(t.$L=h),t},r.clone=function(){return g.w(this.$d,this)},r.toDate=function(){return new Date(this.valueOf())},r.toJSON=function(){return this.isValid()?this.toISOString():null},r.toISOString=function(){return this.$d.toISOString()},r.toString=function(){return this.$d.toUTCString()},e}(),se=ne.prototype;return m.prototype=se,[["$ms",O],["$s",B],["$m",n],["$H",H],["$W",R],["$M",_],["$y",Y],["$D",A]].forEach(function(e){se[e[1]]=function(r){return this.$g(r,e[0],e[1])}}),m.extend=function(e,r){return e.$i||(e(r,ne,m),e.$i=!0),m},m.locale=I,m.isDayjs=U,m.unix=function(e){return m(1e3*e)},m.en=F[j],m.Ls=F,m.p={},m})})(Ue);var Yt=Ue.exports;const De=Ze(Yt),be=(s,f="YYYY-MM-DD HH:mm:ss")=>De(s).isValid()?De(s).format(f):s,Dt=s=>({year:"YYYY",years:"YYYY",month:"YYYY-MM",months:"YYYY-MM",date:"YYYY-MM-DD",dates:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",week:"YYYY-MM-DD",datetimerange:"YYYY-MM-DD HH:mm:ss",daterange:"YYYY-MM-DD",monthrange:"YYYY-MM",yearrange:"YYYY"})[s]??"YYYY-MM-DD",x=fe({props:{vNode:{type:[String,Number,Object],required:!0}},setup(s){return()=>s.vNode}}),St={class:"u-title-bar__title"},Tt={key:2,class:"u-title-bar__icon default-icon"},Vt={key:0,class:"u-title-bar__toolbar"},_e=fe({name:"UTitleBar",inheritAttrs:!1,__name:"title-bar",props:{title:{default:""},icon:{default:""},iconClass:{},showIcon:{type:Boolean,default:!0}},setup(s){return(f,D)=>{const p=V("el-icon"),v=V("el-text");return l(),E("div",{class:$e(["u-title-bar",f.$attrs.class]),style:Oe(f.$attrs.style)},[ue("div",St,[f.showIcon?q(f.$slots,"icon",{key:0},()=>[f.icon?(l(),c(p,{key:0,class:"u-title-bar__icon"},{default:b(()=>[(l(),c(de(f.icon)))]),_:1})):f.iconClass?(l(),E("i",{key:1,class:$e(["u-title-bar__icon",f.iconClass])},null,2)):(l(),E("i",Tt))]):L("",!0),W(v,{class:"u-title-bar__text",truncated:"",size:"large"},{default:b(()=>[q(f.$slots,"default",{},()=>[ie(we(f.title),1)])]),_:3})]),f.$slots.toolbar?(l(),E("div",Vt,[q(f.$slots,"toolbar")])):L("",!0)],6)}}}),Ie=fe({name:"UForm",inheritAttrs:!1,__name:"form",props:Me({view:{type:Boolean,default:!1},columns:{},gutter:{default:20},rules:{},labelPosition:{default:"right"},requireAsteriskPosition:{default:"left"},labelWidth:{default:"auto"},labelSuffix:{default:""},inline:{type:Boolean,default:!1},inlineMessage:{type:Boolean,default:!1},statusIcon:{type:Boolean,default:!1},showMessage:{type:Boolean,default:!0},validateOnRuleChange:{type:Boolean,default:!0},hideRequiredAsterisk:{type:Boolean,default:!1},scrollToError:{type:Boolean,default:!1},scrollIntoViewOptions:{default:()=>({})},size:{default:"default"},disabled:{type:Boolean,default:!1}},{modelValue:{default:()=>({})},modelModifiers:{}}),emits:Me(["validate","change"],["update:modelValue"]),setup(s,{expose:f,emit:D}){const p=D,v=Ke(s,"modelValue"),O=s,B=Be(),n=G(),H=ee(()=>ce(O,["view","rules","columns"])),R=ee(()=>{const o=Number(O.gutter);if(o>0){const i=o/2;return{marginLeft:`${-i}px`,marginRight:`${-i}px`}}return{}}),K=(o,i,d)=>{p("validate",o,i,d)},_=(o,i)=>{p("change",o,i)},X=o=>ce(o,["span","element","value","attrs","if","show","style","slot"]),Y=o=>{const i=["autocomplete","input","input-number","input-tag","mention"].includes(o.element),d=o.element?i?"请输入":"请选择":"请输入";return o.required&&!o.rules?[{required:!0,message:d}]:o.rules?o.rules.map(k=>({message:d,...k})):[]},A=(o,i)=>{var j;const d=(i==null?void 0:i.style)??{},k=((j=i.span)==null?void 0:j.split("/"))??[],C=Number(O.gutter);if(C>0){const F=C/2;d.paddingLeft=`${F}px`,d.paddingRight=`${F}px`}if(O.inline||(d.width="100%"),k.length===2){const F=parseInt(k[0]),$=parseInt(k[1]);F>0&&$>0&&F<=$?d.width=`${F/$*100}%`:console.warn(`表单项【${o}】的【span】属性配置错误，请检查配置; 正确格式如：1/2`)}return d},P=o=>{const i=v.value[o.prop];if(i==null)return"";if(o.element==="cascader"){const{props:d={},options:k=[]}=o.attrs??{},C=bt(k,d.children);return ve(C,i,d)}else if(o.element==="transfer"){const{props:d={},data:k=[]}=o.attrs??{};return ve(k,i,{label:d.label,value:d.key??"key"})}else if(["select","checkbox-group","radio-group"].includes(o.element)){const{options:d=[]}=o.attrs;return ve(d,i)}else if(o.element==="switch"){const{activeText:d="是",inactiveText:k="否",activeValue:C=!0}=o.attrs??{};return i===C?d:k}else if(["time-picker","time-select"].includes(o.element)){const{format:d="HH:mm:ss"}=o.attrs??{};return Array.isArray(i)?i.map(k=>be(k,d)).join("-"):be(i,d)}else if(o.element==="date-picker"){const{type:d="date",format:k}=o.attrs??{};let C=Dt(d);return k&&(C=k),Array.isArray(i)?i.map(j=>be(j,C)).join("-"):be(i,C)}return(i==null?void 0:i.toString())??""};return f(new Proxy({},{get(o,i){var k;return(((k=B.refs)==null?void 0:k.formRef)??{})[i]},has(o,i){return Reflect.has(n.value,i)}})),(o,i)=>{const d=V("el-icon"),k=V("el-tooltip"),C=V("el-rate"),j=V("el-upload"),F=V("el-cascader"),$=V("el-button"),U=V("el-checkbox"),I=V("el-radio"),m=V("el-option"),g=V("el-text"),ne=V("el-form-item"),se=V("el-form");return l(),c(se,M({ref_key:"formRef",ref:n,class:"u-form"},H.value,{model:v.value,style:R.value,onValidate:K,class:o.$attrs.class}),{default:b(()=>[(l(!0),E(J,null,te(o.columns,e=>(l(),E(J,{key:e.prop},[(e==null?void 0:e.rendered)??!0?Te((l(),c(ne,M({key:0},X(e),{prop:e.prop,rules:Y(e),style:A(e.prop,e),class:["u-form-item",e.element==="title-bar"?"u-form-item--title-bar":""],label:e.element==="title-bar"?"":e.label}),{label:b(r=>[o.$slots[`label-${e.prop}`]?q(o.$slots,`label-${e.prop}`,M({key:0,item:e},r)):e.renderLabel?(l(),c(w(x),{key:1,"v-node":e.renderLabel({item:e,label:r.label})},null,8,["v-node"])):(l(),E(J,{key:2},[ie(we(e.label)+" ",1),e.tooltip?(l(),c(k,{key:0,content:e.tooltip,placement:"top"},{default:b(()=>[q(o.$slots,"tooltip-icon",{},()=>[W(d,{class:"u-form-item__tooltip-icon"},{default:b(()=>[W(w(Qe))]),_:1})])]),_:2},1032,["content"])):L("",!0)],64))]),error:b(r=>[o.$slots[`error-${e.prop}`]?q(o.$slots,`error-${e.prop}`,M({key:0,item:e},r)):e.renderError?(l(),c(w(x),{key:1,"v-node":e.renderError({item:e,error:r.error})},null,8,["v-node"])):L("",!0)]),default:b(()=>{var r,a,u;return[(o.view||e.view)&&e.element!=="title-bar"?(l(),E(J,{key:0},[e.formatter?(l(),c(w(x),{key:0,"v-node":e.formatter(e)},null,8,["v-node"])):e.element==="rate"?(l(),c(C,M({key:1,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{disabled:!0}),null,16,["modelValue","onUpdate:modelValue"])):e.element==="upload"?(l(),c(j,M({key:2,"file-list":v.value[e.prop]},e.attrs,{disabled:!0,class:"is-view"}),null,16,["file-list"])):(l(),c(w(x),{key:3,"v-node":P(e)},null,8,["v-node"]))],64)):o.$slots[e.prop]?q(o.$slots,e.prop,{key:1,item:e}):e.render?(l(),c(w(x),{key:2,"v-node":e.render({item:e,view:o.view})},null,8,["v-node"])):e.component?(l(),c(de(e.component),M({key:3,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{view:o.view,onChange:t=>_(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","view","onChange"])):e.element?(l(),E(J,{key:4},[e.element==="title-bar"?(l(),c(_e,M({key:0,title:e.label},e.attrs),he({_:2},[(r=e.attrs)!=null&&r.renderIcon?{name:"icon",fn:b(()=>[W(w(x),{"v-node":e.attrs.renderIcon({item:e,view:o.view})},null,8,["v-node"])]),key:"0"}:void 0,(a=e.attrs)!=null&&a.renderToolbar?{name:"toolbar",fn:b(()=>[W(w(x),{"v-node":e.attrs.renderToolbar({item:e,view:o.view})},null,8,["v-node"])]),key:"1"}:void 0,(u=e.attrs)!=null&&u.render?{name:"default",fn:b(()=>[W(w(x),{"v-node":e.attrs.render({item:e,view:o.view})},null,8,["v-node"])]),key:"2"}:void 0]),1040,["title"])):e.element==="cascader"?(l(),c(F,M({key:1,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>_(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):e.element==="upload"?(l(),c(j,M({key:2,"file-list":v.value[e.prop],"onUpdate:fileList":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>_(e.prop,e)}),{default:b(()=>{var t;return[((t=e.attrs)==null?void 0:t.listType)!=="picture-card"?(l(),c($,{key:0,type:"primary"},{default:b(()=>[ie(" 点击上传 ")]),_:1})):L("",!0)]}),_:2},1040,["file-list","onUpdate:fileList","onChange"])):e.element==="checkbox"?(l(),c(U,M({key:3,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>_(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):e.element==="radio"?(l(),c(I,M({key:4,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>_(e.prop,e)}),null,16,["modelValue","onUpdate:modelValue","onChange"])):(l(),c(de(`el-${e.element}`),M({key:5,modelValue:v.value[e.prop],"onUpdate:modelValue":t=>v.value[e.prop]=t},e.attrs,{onChange:t=>_(e.prop,e)}),{default:b(()=>[e.attrs&&e.attrs.options?(l(),E(J,{key:0},[e.element==="select"?(l(!0),E(J,{key:0},te(e.attrs.options,t=>(l(),c(m,M({key:t.value},t),null,16))),128)):e.element==="checkbox-group"?(l(!0),E(J,{key:1},te(e.attrs.options,t=>(l(),c(U,M({key:t.value},t),null,16))),128)):e.element==="radio-group"?(l(!0),E(J,{key:2},te(e.attrs.options,t=>(l(),c(I,M({key:t.value},t),null,16))),128)):L("",!0)],64)):L("",!0)]),_:2},1040,["modelValue","onUpdate:modelValue","onChange"]))],64)):(l(),c(g,{key:5,type:"danger"},{default:b(()=>[ie(we(`请检查表单项【${e.prop}】的配置`),1)]),_:2},1024))]}),_:2},1040,["prop","rules","style","class","label"])),[[Ve,(e==null?void 0:e.display)??!0]]):L("",!0)],64))),128))]),_:3},16,["model","style","class"])}}}),Ee=Ie;Ee.install=s=>{s.component("UForm",Ie)};const Ot=s=>({getElTableColumnAttrs:ee(()=>ce(s.item,["children","formatter","render","component","rendered","element","rules","attrs","renderHeader"])),getFormItemRules:p=>p.required?[{required:!0,message:"请输入"}]:p.rules?p.rules.map(v=>({message:"请输入",...v})):[]}),Bt=fe({__name:"table-column",props:{item:{},editable:{type:Boolean}},emits:["click-operation"],setup(s,{emit:f}){const D=s,p=f,{getElTableColumnAttrs:v,getFormItemRules:O}=Ot(D),B=ee(()=>{const{prop:n,rendered:H=!0,show:R=!0}=D.item;return typeof H=="function"?n&&H(D.item)&&R:n&&H&&R});return(n,H)=>{const R=V("TableColumn",!0),K=V("el-cascader"),_=V("el-checkbox"),X=V("el-radio"),Y=V("el-option"),A=V("el-form-item"),P=V("el-table-column");return B.value?(l(),c(P,ye(M({key:0},w(v))),{header:b(o=>[n.$slots[`header-${n.item.prop}`]?q(n.$slots,`header-${n.item.prop}`,M({key:0},o,{item:n.item})):n.item.renderHeader?(l(),c(w(x),{key:1,"v-node":n.item.renderHeader({...o,item:n.item})},null,8,["v-node"])):L("",!0)]),"filter-icon":b(o=>[n.$slots[`filter-icon-${n.item.prop}`]?q(n.$slots,`filter-icon-${n.item.prop}`,M({key:0},o,{item:n.item})):n.item.renderFilterIcon?(l(),c(w(x),{key:1,"v-node":n.item.renderFilterIcon({...o,item:n.item})},null,8,["v-node"])):L("",!0)]),default:b(o=>[n.item.children?(l(!0),E(J,{key:0},te(n.item.children,i=>(l(),c(R,{key:i.prop,item:i,editable:n.editable},he({_:2},[te(Object.keys(n.$slots),d=>({name:d,fn:b(k=>[q(n.$slots,d,ye(ke(k)))])}))]),1032,["item","editable"]))),128)):o.$index>-1&&n.editable&&n.item.element?(l(),c(A,{key:1,prop:`${o.$index}.${n.item.prop}`,rules:w(O)(n.item)},{default:b(()=>[n.item.element==="cascader"?(l(),c(K,M({key:0,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):n.item.element==="checkbox"?(l(),c(_,M({key:1,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):n.item.element==="radio"?(l(),c(X,M({key:2,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),null,16,["modelValue","onUpdate:modelValue"])):(l(),c(de(`el-${n.item.element}`),M({key:3,modelValue:o.row[n.item.prop],"onUpdate:modelValue":i=>o.row[n.item.prop]=i},n.item.attrs),{default:b(()=>{var i,d,k;return[n.item.element==="select"?(l(!0),E(J,{key:0},te(((i=n.item.attrs)==null?void 0:i.options)??[],C=>(l(),c(Y,M({key:C.value},C),null,16))),128)):n.item.element==="checkbox-group"?(l(!0),E(J,{key:1},te(((d=n.item.attrs)==null?void 0:d.options)??[],C=>(l(),c(_,M({key:C.value},C),null,16))),128)):n.item.element==="radio-group"?(l(!0),E(J,{key:2},te(((k=n.item.attrs)==null?void 0:k.options)??[],C=>(l(),c(X,M({key:C.value},C),null,16))),128)):L("",!0)]}),_:2},1040,["modelValue","onUpdate:modelValue"]))]),_:2},1032,["prop","rules"])):n.$slots[n.item.prop]?q(n.$slots,n.item.prop,M({key:2},o,{item:n.item})):n.item.component?(l(),E(J,{key:3},[n.item.component==="operation"?(l(),c(ct,M({key:0,slotProps:o,item:n.item},n.item.attrs,{onClickOperation:H[0]||(H[0]=(...i)=>p("click-operation",...i))}),null,16,["slotProps","item"])):(l(),c(de(n.item.component),M({key:1,slotProps:o,item:n.item},n.item.attrs),null,16,["slotProps","item"]))],64)):n.item.formatter?(l(),c(w(x),{key:4,"v-node":n.item.formatter({...o,item:n.item})},null,8,["v-node"])):L("",!0)]),_:3},16)):L("",!0)}}}),Rt=(s,f)=>{const D=G(),p=G([]),v=G(!1),O=G([]),B=ee(()=>Array.isArray(s.toolbar)?s.toolbar.length>0:s.toolbar),n=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("refresh"):s.toolbar===!0),H=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("fullscreen"):s.toolbar===!0),R=ee(()=>Array.isArray(s.toolbar)?s.toolbar.includes("setting"):s.toolbar===!0),K=()=>{f("refresh")},_=G(),{isFullscreen:X,toggleFullscreen:Y}=ft(_),A=ee(()=>{let $=0;const U=I=>{I.forEach(m=>{$++,Ce(m.children)||U(m.children)})};return U(p.value),$}),P=($,U,I)=>(U.forEach(m=>{Re(I)||(m.show=I);const{rendered:g=!0,show:ne=!0}=m;typeof g=="function"?g(m)&&ne&&$.push(m.prop):g&&ne&&$.push(m.prop),m.children&&P($,m.children,I)}),$),o=$=>{var I;const U=P([],p.value,$);(I=D.value)==null||I.setCheckedKeys(U)},i=($,U,I)=>{!Ce($.children)&&I?$.show=!0:$.show=U;const m=D.value.getCheckedNodes().length||0;k.value=m<A.value&&m!==0,d.value=m===A.value},d=G(!0),k=G(!1),C=()=>{o(d.value)},j=($,U,I)=>{if(I==="inner")return!1;const m=$.parent,g=U.parent;return m===g},F=()=>{p.value=Ye(O.value)};return qe(()=>s.columns,$=>{Ce($)||(O.value=Ye($),v.value=!0),p.value=$},{immediate:!0}),{_columns:p,showToolbar:B,showRefresh:n,showFullscreen:H,showSetting:R,uTableRef:_,handleRefresh:K,isFullscreen:X,toggleFullscreen:Y,treeRef:D,setCheckedKeys:o,checkedAll:d,checkedIndeterminate:k,handleChangeCheckedAll:C,handleResetColumns:F,handleCheckChange:i,allowDrop:j}},At={class:"u-table-setting"},Ft={class:"u-table-setting-header"},He=fe({name:"UTable",__name:"table",props:{columns:{},editable:{type:Boolean,default:!1},showSelection:{type:Boolean,default:!1},selectionProps:{default:()=>({})},showIndex:{type:Boolean,default:!1},indexProps:{default:()=>({})},showExpand:{type:Boolean,default:!1},expandProps:{default:()=>({})},showTitleBar:{type:Boolean,default:!0},title:{},toolbar:{type:[Boolean,Array],default:!0},data:{},size:{},width:{},height:{},maxHeight:{},fit:{type:Boolean,default:!0},stripe:{type:Boolean,default:!1},border:{type:Boolean,default:!1},rowKey:{},context:{},showHeader:{type:Boolean,default:!0},showSummary:{type:Boolean,default:!1},sumText:{},summaryMethod:{},rowClassName:{},rowStyle:{},cellClassName:{},cellStyle:{},headerRowClassName:{},headerRowStyle:{},headerCellClassName:{},headerCellStyle:{},highlightCurrentRow:{type:Boolean,default:!1},currentRowKey:{},emptyText:{},expandRowKeys:{},defaultExpandAll:{type:Boolean,default:!1},defaultSort:{},tooltipEffect:{},tooltipOptions:{},spanMethod:{},selectOnIndeterminate:{type:Boolean,default:!0},indent:{},treeProps:{},lazy:{type:Boolean,default:!1},load:{},className:{},style:{},tableLayout:{},scrollbarAlwaysOn:{type:Boolean,default:!1},flexible:{type:Boolean,default:!1},showOverflowTooltip:{type:[Boolean,Object],default:!1},tooltipFormatter:{},appendFilterPanelTo:{},scrollbarTabindex:{}},emits:["click-operation","refresh"],setup(s,{expose:f,emit:D}){const p=s,v=D,O=Be(),B=G(),n=G(),H=ee(()=>ce(p.indexProps,["formatter","renderHeader"])),R=ee(()=>ce(p.selectionProps,["formatter","renderHeader"])),K=Je(),_=ee(()=>{const e=Object.keys(p).filter(r=>Re(p[r]));return e.push("columns","editable"),ce({...p,...K},e)}),X=(e,r,a)=>{v("click-operation",e,r,a)},{_columns:Y,showToolbar:A,showRefresh:P,showFullscreen:o,showSetting:i,uTableRef:d,handleRefresh:k,isFullscreen:C,toggleFullscreen:j,treeRef:F,setCheckedKeys:$,checkedAll:U,checkedIndeterminate:I,handleChangeCheckedAll:m,handleResetColumns:g,handleCheckChange:ne,allowDrop:se}=Rt(p,v);return f(new Proxy({},{get(e,r){var u;return r==="validate"?n.value.validate:r==="validateField"?n.value.validateField:r==="scrollToField"?n.value.scrollToField:r==="resetFields"?n.value.resetFields:r==="clearValidate"?n.value.clearValidate:(((u=O.refs)==null?void 0:u.tableRef)??{})[r]},has(e,r){return Reflect.has(B.value,r)||Reflect.has(n.value,r)}})),(e,r)=>{const a=V("el-button"),u=V("el-tooltip"),t=V("el-checkbox"),h=V("el-tree"),y=V("el-popover"),T=V("el-table-column"),N=V("el-table"),z=V("el-form");return l(),E("div",{class:$e(["u-table",{"is-fullscreen":w(C)}]),ref_key:"uTableRef",ref:d},[e.showTitleBar?(l(),c(_e,{key:0,title:e.title,"show-icon":!1},{default:b(()=>[q(e.$slots,"title")]),toolbar:b(()=>[q(e.$slots,"toolbar"),w(A)?(l(),E(J,{key:0},[w(P)?(l(),c(u,{key:0,content:"刷新",placement:"top",teleported:!1},{default:b(()=>[W(a,{circle:"",icon:w(xe),onClick:w(k)},null,8,["icon","onClick"])]),_:1})):L("",!0),w(o)?(l(),c(u,{key:1,content:w(C)?"退出全屏":"全屏",placement:"top",teleported:!1},{default:b(()=>[W(a,{circle:"",icon:w(et),onClick:r[0]||(r[0]=S=>w(j)())},null,8,["icon"])]),_:1},8,["content"])):L("",!0),w(i)?(l(),c(u,{key:2,content:"设置",placement:"top",teleported:!1},{default:b(()=>[W(a,{circle:""},{default:b(()=>[W(y,{placement:"bottom-end",trigger:"click",onBeforeEnter:r[2]||(r[2]=S=>w($)()),"popper-class":"u-table-setting-popper",teleported:!1},{reference:b(()=>[W(a,{circle:"",icon:w(tt)},null,8,["icon"])]),default:b(()=>[ue("div",At,[ue("div",Ft,[W(t,{modelValue:w(U),"onUpdate:modelValue":r[1]||(r[1]=S=>Xe(U)?U.value=S:null),onChange:w(m),indeterminate:w(I)},{default:b(()=>[ie("全选")]),_:1},8,["modelValue","onChange","indeterminate"]),W(a,{type:"primary",link:"",onClick:w(g)},{default:b(()=>[ie("重置")]),_:1},8,["onClick"])]),W(h,{ref_key:"treeRef",ref:F,data:w(Y),"node-key":"prop","show-checkbox":"",draggable:"","allow-drop":w(se),onCheckChange:w(ne)},null,8,["data","allow-drop","onCheckChange"])])]),_:1})]),_:1})]),_:1})):L("",!0)],64)):L("",!0)]),_:3},8,["title"])):L("",!0),W(z,{ref_key:"formRef",ref:n,model:e.data,"show-message":!1},{default:b(()=>[W(N,M({ref_key:"tableRef",ref:B},_.value),he({default:b(()=>[e.showExpand?(l(),c(T,M({key:0,type:"expand"},e.expandProps),{default:b(S=>[q(e.$slots,"expand",ye(ke(S)))]),_:3},16)):L("",!0),e.showIndex?(l(),c(T,M({key:1,type:"index"},H.value),he({_:2},[e.indexProps.renderHeader?{name:"header",fn:b(S=>[W(w(x),{"v-node":e.indexProps.renderHeader(S)},null,8,["v-node"])]),key:"0"}:void 0,e.indexProps.formatter?{name:"default",fn:b(S=>[W(w(x),{"v-node":e.indexProps.formatter(S)},null,8,["v-node"])]),key:"1"}:void 0]),1040)):L("",!0),e.showSelection?(l(),c(T,M({key:2,type:"selection"},R.value),null,16)):L("",!0),(l(!0),E(J,null,te(w(Y),S=>(l(),c(Bt,{key:S.prop,item:S,editable:e.editable,onClickOperation:X},he({_:2},[te(Object.keys(e.$slots),Z=>({name:Z,fn:b(re=>[q(e.$slots,Z,ye(ke(re)))])}))]),1032,["item","editable"]))),128))]),_:2},[e.$slots.empty?{name:"empty",fn:b(()=>[q(e.$slots,"empty")]),key:"0"}:void 0,e.$slots.append?{name:"append",fn:b(S=>[q(e.$slots,"append",ye(ke(S)))]),key:"1"}:void 0]),1040)]),_:3},8,["model"])],2)}}}),Ne=He;Ne.install=s=>{s.component("UTable",He)};const Le=_e;Le.install=s=>{s.component("UTitleBar",_e)};const Jt=(s,f={})=>{const{auto:D=!0,isShallow:p=!0,defaultFormData:v={},defaultPageSize:O=10}=f,B=G(!1),n=G({pageNum:1,pageSize:O,total:0}),{formRef:H,formData:R,formOptions:K,setFormOptions:_,updateFormItemOption:X,getFormData:Y}=ht(()=>v,!1);Y();const{tableRef:A,tableData:P,tableColumns:o,tableOperations:i,multipleSelection:d,handleSelectionChange:k,toggleTableColumnRendered:C,setTableColumns:j,setTableOperations:F}=mt(()=>[],{auto:!1,isShallow:p}),$=async()=>{B.value=!0;const m={...R.value,pageNum:n.value.pageNum,pageSize:n.value.pageSize},g=await s(m);P.value=g.rows,n.value.total=g.total},U=async m=>{n.value.pageNum=1,R.value={...R.value,...m},await $()},I=async m=>{n.value.pageNum=1,R.value={...v,...m},await $()};return Se(()=>{D&&$()}),{loading:B,formRef:H,formData:R,formOptions:K,setFormOptions:_,updateFormItemOption:X,tableRef:A,tableData:P,tableColumns:o,tableOperations:i,multipleSelection:d,handleSelectionChange:k,toggleTableColumnRendered:C,setTableColumns:j,setTableOperations:F,pagerParams:n,fetchData:$,query:U,reset:I}},Ut=[Ee,Ne,Fe,dt,Le],It=s=>{Ut.forEach(f=>{s.component(f.name,f)})},Xt={install:It};export{Fe as UContextMenu,Ee as UForm,dt as UOperation,Ne as UTable,Le as UTitleBar,Xt as default,It as install,ht as useForm,ft as useFullscreen,Jt as usePage,mt as useTable};
